<!DOCTYPE html>
<html xmlns:th = "https://thymeleaf.org"
	  xmlns:sec = "https://ww.thymeleaf.org/extras/spring-security"	>
<head>
	<title th:text = "${user.firstName}"></title>
	<link rel="stylesheet" th:href="@{/css/home.css}">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville&display=swap" rel="stylesheet">
	<script type = "text/javascript" src = "/js/home.js"></script>
</head>

<body>
	
	<p class="welcome" th:inline = "text"> Hey, [[${user.firstName}]] let's go on an adventure!</p>
<!-- 	<div> -->
	<div sec:authorize = "hasRole('ROLE_USER')" class = "container-form">
<!-- 		<form id="joinParty" th:action = "@{/join-party/{partyDtoId} (partyDtoId = ${partyDtoTwo.partyDtoId})}" method = "post" th:object = "${partyDtoTwo}"></form> -->
<!-- 		<form action = "" method="post" th:object = "${user}" onchange = "onChange()"> -->
<!-- 			<select th:name="parties" th:field = "${user.parties}"> -->
<!-- 				<option th:each = "party : ${partiesList}" th:value = "${party.partyId}" th:text = "${party.partyName}" ></option> -->
<!-- 			</select> -->
<!-- 			<button class = "ui-button" type = "submit" form="joinParty">Join your party</button> -->
<!-- 		</form> -->
			<table>
				<tr>
					<th>Join Your Party Below</th>
				</tr>
				<tr th:each = "party : ${partiesList}">
					<td>
						<a th:href = "@{/join-party/{partyId} (partyId = ${party.partyId})}" th:text = "${party.partyName}">Join Party</a>
					</td>
			</table>
	</div>	
	<div sec:authorize = "hasRole('ROLE_USER')">
		<form action = "create-character" method = "get">
			<button class = "user-button" type="submit">Create Your Character</button>
		</form>
	</div>	
			
	<div sec:authorize="hasRole('ROLE_DM')">
		<form action = "create-party" method = "post" th:object = "${partyDto}">
			<label class = "input-tags">Party Name: </label><input th:field="${partyDto.partyName}" type="text" class="form-holder" placeholder= "Party Name">
			<button class="button" type="submit">Create Party</button>
		</form>
		<div>
			<label class = "input-tags">Click here for randomly generated Party Names:</label><a href = "https://codexnomina.com/party-names/" target="_blank">Party Generator</a>
			
		</div>
	</div>
	
	<div class = "delete-button">
		<form th:action = "@{/home/delete/{userId} (userId = ${user.userId})}"
		method = "post">
			<input type = "submit" value = "Delete your account" class= "delete-button">
		</form>
	</div>
	<div>
		<form th:action = "@{/home/parties/{userId} (userId = ${user.userId})}" method = "get">
			<input type = "submit" value = "See your parties" class = "user-button">
		</form>
	</div>
	<div class = "logout-button">
		<form action = "/logout" method = "post">
			<button type = "submit" class = "logout-button">Logout</button>
		</form>
	</div>
</body>
</html>
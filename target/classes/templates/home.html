<!DOCTYPE html>
<html xmlns:th = "https://thymeleaf.org"
	  xmlns:sec = "https://ww.thymeleaf.org/extras/spring-security"	>
<head>
	<title th:text = "${user.firstName}"></title>
	<script type = "text/javascript" src = "/js/home.js"></script>
</head>

<body>
	<h1>Test</h1>
	<p th:inline = "text"> Hey, [[${user.firstName}]] let's go on an adventure!</p>
	<div>
	<div class = "container-form" th:object = "${initialList}">
		<form th:action = "@{join-party/{partyId} (partyId = ${initialList})}" method="post" th:object = "${user}" onchange = "onChange()">
			<select th:name="parties" th:field = "${user.parties}">
				<option th:each = "party : ${partiesList}" th:value = "${party.partyId}" th:text = "${party.partyName}" ></option>
			</select>
			<button class = "ui-button" type = "submit">Join your party</button>
		</form>
	<div sec:authorize="hasRole('ROLE_DM')">
		<form action = "create-party" method = "post" th:object = "${partyDto}">
			<label class = "input-tags">Party Name: </label><input th:field="${partyDto.partyName}" type="text" class="form-holder" placeholder= "Party Name">
			<button class="ui-button" type="submit">Create Party</button>
		</form>
		<div>
			<label class = "input-tags">Click here for randomly generated Party Names:</label><a href = "https://codexnomina.com/party-names/" target="_blank">Party Generator</a>
			
		</div>
	</div>
	
	</div>
		<form th:action = "@{/home/delete/{userId} (userId = ${user.userId})}"
		method = "post">
			<input type = "submit" value = "Delete your account">
		</form>
	</div>
</body>
</html>